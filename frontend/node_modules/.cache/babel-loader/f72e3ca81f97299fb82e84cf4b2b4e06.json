{"ast":null,"code":"import React,{useState,useEffect,useRef,useContext}from\"react\";import*as Yup from\"yup\";import{Formik,Form,Field}from\"formik\";import{toast}from\"react-toastify\";import{head}from\"lodash\";import{makeStyles}from\"@material-ui/core/styles\";import{green}from\"@material-ui/core/colors\";import Button from\"@material-ui/core/Button\";import IconButton from\"@material-ui/core/IconButton\";import TextField from\"@material-ui/core/TextField\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import CircularProgress from\"@material-ui/core/CircularProgress\";import AttachFileIcon from\"@material-ui/icons/AttachFile\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import Chip from'@material-ui/core/Chip';import{isNil}from\"lodash\";import{i18n}from\"../../translate/i18n\";import moment from\"moment\";import api from\"../../services/api\";import toastError from\"../../errors/toastError\";import{Box,FormControl,Grid,InputLabel,MenuItem,Select,Tab,Tabs}from\"@material-ui/core\";import{AuthContext}from\"../../context/Auth/AuthContext\";import ConfirmationModal from\"../ConfirmationModal\";import UserStatusIcon from\"../UserModal/statusIcon\";import Autocomplete,{createFilterOptions}from\"@material-ui/lab/Autocomplete\";import useQueues from\"../../hooks/useQueues\";const useStyles=makeStyles(theme=>({root:{display:\"flex\",flexWrap:\"wrap\"},textField:{marginRight:theme.spacing(1),flex:1},extraAttr:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btnWrapper:{position:\"relative\"},buttonProgress:{color:green[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12}}));const CampaignSchema=Yup.object().shape({name:Yup.string().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\")});const CampaignModal=_ref=>{let{open,onClose,campaignId,initialValues,onSave,resetPagination}=_ref;const classes=useStyles();const isMounted=useRef(true);const{user,socket}=useContext(AuthContext);const{companyId}=user;const initialState={name:\"\",message1:\"\",message2:\"\",message3:\"\",message4:\"\",message5:\"\",confirmationMessage1:\"\",confirmationMessage2:\"\",confirmationMessage3:\"\",confirmationMessage4:\"\",confirmationMessage5:\"\",status:\"INATIVA\",// INATIVA, PROGRAMADA, EM_ANDAMENTO, CANCELADA, FINALIZADA,\nconfirmation:false,scheduledAt:\"\",//whatsappId: \"\",\ncontactListId:\"\",tagListId:\"Nenhuma\",companyId,statusTicket:\"closed\",openTicket:\"disabled\"};const[campaign,setCampaign]=useState(initialState);const[whatsapps,setWhatsapps]=useState([]);const[selectedWhatsapps,setSelectedWhatsapps]=useState([]);const[whatsappId,setWhatsappId]=useState(false);const[contactLists,setContactLists]=useState([]);const[tagLists,setTagLists]=useState([]);const[messageTab,setMessageTab]=useState(0);const[attachment,setAttachment]=useState(null);const[confirmationOpen,setConfirmationOpen]=useState(false);const[campaignEditable,setCampaignEditable]=useState(true);const attachmentFile=useRef(null);const[options,setOptions]=useState([]);const[queues,setQueues]=useState([]);const[allQueues,setAllQueues]=useState([]);const[loading,setLoading]=useState(false);const[searchParam,setSearchParam]=useState(\"\");const[selectedUser,setSelectedUser]=useState(null);const[selectedQueue,setSelectedQueue]=useState(null);const{findAll:findAllQueues}=useQueues();useEffect(()=>{return()=>{isMounted.current=false;};},[]);useEffect(()=>{if(isMounted.current){const loadQueues=async()=>{const list=await findAllQueues();setAllQueues(list);setQueues(list);};loadQueues();}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{if(searchParam.length<3){setLoading(false);setSelectedQueue(\"\");return;}const delayDebounceFn=setTimeout(()=>{setLoading(true);const fetchUsers=async()=>{try{const{data}=await api.get(\"/users/\");setOptions(data.users);setLoading(false);}catch(err){setLoading(false);toastError(err);}};fetchUsers();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam]);useEffect(()=>{if(isMounted.current){if(initialValues){setCampaign(prevState=>{return{...prevState,...initialValues};});}api.get(\"/contact-lists/list\",{params:{companyId}}).then(_ref2=>{let{data}=_ref2;return setContactLists(data);});api.get(\"/whatsapp\",{params:{companyId,session:0}}).then(_ref3=>{let{data}=_ref3;// Mapear os dados recebidos da API para adicionar a propriedade 'selected'\nconst mappedWhatsapps=data.map(whatsapp=>({...whatsapp,selected:false}));setWhatsapps(mappedWhatsapps);});api.get(\"/tags/list\",{params:{companyId,kanban:0}}).then(_ref4=>{let{data}=_ref4;const fetchedTags=data;// Perform any necessary data transformation here\nconst formattedTagLists=fetchedTags.filter(tag=>tag.contacts.length>0)// Filtra as tags com contacts.length > 0\n.map(tag=>({id:tag.id,name:\"\".concat(tag.name,\" (\").concat(tag.contacts.length,\")\")}));setTagLists(formattedTagLists);}).catch(error=>{console.error(\"Error retrieving tags:\",error);});if(!campaignId)return;api.get(\"/campaigns/\".concat(campaignId)).then(_ref5=>{let{data}=_ref5;if(data===null||data===void 0?void 0:data.user)setSelectedUser(data.user);if(data===null||data===void 0?void 0:data.queue)setSelectedQueue(data.queue.id);if(data===null||data===void 0?void 0:data.whatsappId){// const selectedWhatsapps = data.whatsappId.split(\",\");\nsetWhatsappId(data.whatsappId);}setCampaign(prev=>{let prevCampaignData=Object.assign({},prev);Object.entries(data).forEach(_ref6=>{let[key,value]=_ref6;if(key===\"scheduledAt\"&&value!==\"\"&&value!==null){prevCampaignData[key]=moment(value).format(\"YYYY-MM-DDTHH:mm\");}else{prevCampaignData[key]=value===null?\"\":value;}});return prevCampaignData;});});}},[campaignId,open,initialValues,companyId]);useEffect(()=>{const now=moment();const scheduledAt=moment(campaign.scheduledAt);const moreThenAnHour=!Number.isNaN(scheduledAt.diff(now))&&scheduledAt.diff(now,\"hour\")>1;const isEditable=campaign.status===\"INATIVA\"||campaign.status===\"PROGRAMADA\"&&moreThenAnHour;setCampaignEditable(isEditable);},[campaign.status,campaign.scheduledAt]);const handleClose=()=>{onClose();setCampaign(initialState);};const handleAttachmentFile=e=>{const file=head(e.target.files);if(file){setAttachment(file);}};const handleSaveCampaign=async values=>{try{const dataValues={...values,// Merge the existing values object\nwhatsappId:whatsappId,userId:(selectedUser===null||selectedUser===void 0?void 0:selectedUser.id)||null,queueId:selectedQueue||null};Object.entries(values).forEach(_ref7=>{let[key,value]=_ref7;if(key===\"scheduledAt\"&&value!==\"\"&&value!==null){dataValues[key]=moment(value).format(\"YYYY-MM-DD HH:mm:ss\");}else{dataValues[key]=value===\"\"?null:value;}});if(campaignId){await api.put(\"/campaigns/\".concat(campaignId),dataValues);if(attachment!=null){const formData=new FormData();formData.append(\"file\",attachment);await api.post(\"/campaigns/\".concat(campaignId,\"/media-upload\"),formData);}handleClose();}else{const{data}=await api.post(\"/campaigns\",dataValues);if(attachment!=null){const formData=new FormData();formData.append(\"file\",attachment);await api.post(\"/campaigns/\".concat(data.id,\"/media-upload\"),formData);}if(onSave){onSave(data);}handleClose();}toast.success(i18n.t(\"campaigns.toasts.success\"));}catch(err){console.log(err);toastError(err);}};const deleteMedia=async()=>{if(attachment){setAttachment(null);attachmentFile.current.value=null;}if(campaign.mediaPath){await api.delete(\"/campaigns/\".concat(campaign.id,\"/media-upload\"));setCampaign(prev=>({...prev,mediaPath:null,mediaName:null}));toast.success(i18n.t(\"campaigns.toasts.deleted\"));}};const renderMessageField=identifier=>{return/*#__PURE__*/React.createElement(Field,{as:TextField,id:identifier,name:identifier,fullWidth:true,rows:5,label:i18n.t(\"campaigns.dialog.form.\".concat(identifier)),placeholder:i18n.t(\"campaigns.dialog.form.messagePlaceholder\"),multiline:true,variant:\"outlined\",helperText:\"Utilize vari\\xE1veis como {nome}, {numero}, {email} ou defina vari\\xE1veis personalizadas.\",disabled:!campaignEditable&&campaign.status!==\"CANCELADA\"});};const renderConfirmationMessageField=identifier=>{return/*#__PURE__*/React.createElement(Field,{as:TextField,id:identifier,name:identifier,fullWidth:true,rows:5,label:i18n.t(\"campaigns.dialog.form.\".concat(identifier)),placeholder:i18n.t(\"campaigns.dialog.form.messagePlaceholder\"),multiline:true,variant:\"outlined\",disabled:!campaignEditable&&campaign.status!==\"CANCELADA\"});};const cancelCampaign=async()=>{try{await api.post(\"/campaigns/\".concat(campaign.id,\"/cancel\"));toast.success(i18n.t(\"campaigns.toasts.cancel\"));setCampaign(prev=>({...prev,status:\"CANCELADA\"}));resetPagination();}catch(err){toast.error(err.message);}};const restartCampaign=async()=>{try{await api.post(\"/campaigns/\".concat(campaign.id,\"/restart\"));toast.success(i18n.t(\"campaigns.toasts.restart\"));setCampaign(prev=>({...prev,status:\"EM_ANDAMENTO\"}));resetPagination();}catch(err){toast.error(err.message);}};const filterOptions=createFilterOptions({trim:true});return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(ConfirmationModal,{title:i18n.t(\"campaigns.confirmationModal.deleteTitle\"),open:confirmationOpen,onClose:()=>setConfirmationOpen(false),onConfirm:deleteMedia},i18n.t(\"campaigns.confirmationModal.deleteMessage\")),/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:handleClose,fullWidth:true,maxWidth:\"md\",scroll:\"paper\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},campaignEditable?/*#__PURE__*/React.createElement(React.Fragment,null,campaignId?\"\".concat(i18n.t(\"campaigns.dialog.update\")):\"\".concat(i18n.t(\"campaigns.dialog.new\"))):/*#__PURE__*/React.createElement(React.Fragment,null,\"\".concat(i18n.t(\"campaigns.dialog.readonly\")))),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"none\"}},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",ref:attachmentFile,onChange:e=>handleAttachmentFile(e)})),/*#__PURE__*/React.createElement(Formik,{initialValues:campaign,enableReinitialize:true,validationSchema:CampaignSchema,onSubmit:(values,actions)=>{setTimeout(()=>{handleSaveCampaign(values);actions.setSubmitting(false);},400);}},_ref8=>{let{values,errors,touched,isSubmitting}=_ref8;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"campaigns.dialog.form.name\"),name:\"name\",error:touched.name&&Boolean(errors.name),helperText:touched.name&&errors.name,variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.textField,disabled:!campaignEditable})),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"confirmation-selection-label\"},i18n.t(\"campaigns.dialog.form.confirmation\")),/*#__PURE__*/React.createElement(Field,{as:Select,label:i18n.t(\"campaigns.dialog.form.confirmation\"),placeholder:i18n.t(\"campaigns.dialog.form.confirmation\"),labelId:\"confirmation-selection-label\",id:\"confirmation\",name:\"confirmation\",error:touched.confirmation&&Boolean(errors.confirmation),disabled:!campaignEditable},/*#__PURE__*/React.createElement(MenuItem,{value:false},\"Desabilitada\"),/*#__PURE__*/React.createElement(MenuItem,{value:true},\"Habilitada\")))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"contactList-selection-label\"},i18n.t(\"campaigns.dialog.form.contactList\")),/*#__PURE__*/React.createElement(Field,{as:Select,label:i18n.t(\"campaigns.dialog.form.contactList\"),placeholder:i18n.t(\"campaigns.dialog.form.contactList\"),labelId:\"contactList-selection-label\",id:\"contactListId\",name:\"contactListId\",error:touched.contactListId&&Boolean(errors.contactListId),disabled:!campaignEditable},/*#__PURE__*/React.createElement(MenuItem,{value:\"\"},\"Nenhuma\"),contactLists&&contactLists.map(contactList=>/*#__PURE__*/React.createElement(MenuItem,{key:contactList.id,value:contactList.id},contactList.name))))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"tagList-selection-label\"},i18n.t(\"campaigns.dialog.form.tagList\")),/*#__PURE__*/React.createElement(Field,{as:Select,label:i18n.t(\"campaigns.dialog.form.tagList\"),placeholder:i18n.t(\"campaigns.dialog.form.tagList\"),labelId:\"tagList-selection-label\",id:\"tagListId\",name:\"tagListId\",error:touched.tagListId&&Boolean(errors.tagListId),disabled:!campaignEditable},Array.isArray(tagLists)&&tagLists.map(tagList=>/*#__PURE__*/React.createElement(MenuItem,{key:tagList.id,value:tagList.id},tagList.name))))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"whatsapp-selection-label\"},i18n.t(\"campaigns.dialog.form.whatsapp\")),/*#__PURE__*/React.createElement(Field,{as:Select// multiple\n,label:i18n.t(\"campaigns.dialog.form.whatsapp\"),placeholder:i18n.t(\"campaigns.dialog.form.whatsapp\"),labelId:\"whatsapp-selection-label\",id:\"whatsappIds\",name:\"whatsappIds\",required:true,error:touched.whatsappId&&Boolean(errors.whatsappId),disabled:!campaignEditable,value:whatsappId,onChange:event=>{console.log(event.target.value);setWhatsappId(event.target.value);}// renderValue={(selected) => (\n//   <div>\n//     {selected.map((value) => (\n//       <Chip key={value} label={whatsapps.find((whatsapp) => whatsapp.id === value).name} />\n//     ))}\n//   </div>\n// )}\n},whatsapps&&whatsapps.map(whatsapp=>/*#__PURE__*/React.createElement(MenuItem,{key:whatsapp.id,value:whatsapp.id},whatsapp.name))))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"campaigns.dialog.form.scheduledAt\"),name:\"scheduledAt\",error:touched.scheduledAt&&Boolean(errors.scheduledAt),helperText:touched.scheduledAt&&errors.scheduledAt,variant:\"outlined\",margin:\"dense\",type:\"datetime-local\",InputLabelProps:{shrink:true},fullWidth:true,className:classes.textField,disabled:!campaignEditable})),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"openTicket-selection-label\"},i18n.t(\"campaigns.dialog.form.openTicket\")),/*#__PURE__*/React.createElement(Field,{as:Select,label:i18n.t(\"campaigns.dialog.form.openTicket\"),placeholder:i18n.t(\"campaigns.dialog.form.openTicket\"),labelId:\"openTicket-selection-label\",id:\"openTicket\",name:\"openTicket\",error:touched.openTicket&&Boolean(errors.openTicket),disabled:!campaignEditable},/*#__PURE__*/React.createElement(MenuItem,{value:\"enabled\"},i18n.t(\"campaigns.dialog.form.enabledOpenTicket\")),/*#__PURE__*/React.createElement(MenuItem,{value:\"disabled\"},i18n.t(\"campaigns.dialog.form.disabledOpenTicket\"))))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(Autocomplete,{style:{marginTop:'8px'},variant:\"outlined\",margin:\"dense\",className:classes.formControl,getOptionLabel:option=>\"\".concat(option.name),value:selectedUser,size:\"small\",onChange:(e,newValue)=>{setSelectedUser(newValue);if(newValue!=null&&Array.isArray(newValue.queues)){if(newValue.queues.length===1){setSelectedQueue(newValue.queues[0].id);}setQueues(newValue.queues);}else{setQueues(allQueues);setSelectedQueue(\"\");}},options:options,filterOptions:filterOptions,freeSolo:true,fullWidth:true,autoHighlight:true,disabled:!campaignEditable||values.openTicket==='disabled',noOptionsText:i18n.t(\"transferTicketModal.noOptions\"),loading:loading,renderOption:option=>/*#__PURE__*/React.createElement(\"span\",null,\" \",/*#__PURE__*/React.createElement(UserStatusIcon,{user:option}),\" \",option.name),renderInput:params=>/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{label:i18n.t(\"transferTicketModal.fieldLabel\"),variant:\"outlined\",onChange:e=>setSearchParam(e.target.value),InputProps:{...params.InputProps,endAdornment:/*#__PURE__*/React.createElement(React.Fragment,null,loading?/*#__PURE__*/React.createElement(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment)}}))})),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,null,i18n.t(\"transferTicketModal.fieldQueueLabel\")),/*#__PURE__*/React.createElement(Select,{value:selectedQueue,onChange:e=>setSelectedQueue(e.target.value),label:i18n.t(\"transferTicketModal.fieldQueuePlaceholder\"),required:!isNil(selectedUser),disabled:!campaignEditable||values.openTicket==='disabled'},queues.map(queue=>/*#__PURE__*/React.createElement(MenuItem,{key:queue.id,value:queue.id},queue.name))))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"statusTicket-selection-label\"},i18n.t(\"campaigns.dialog.form.statusTicket\")),/*#__PURE__*/React.createElement(Field,{as:Select,label:i18n.t(\"campaigns.dialog.form.statusTicket\"),placeholder:i18n.t(\"campaigns.dialog.form.statusTicket\"),labelId:\"statusTicket-selection-label\",id:\"statusTicket\",name:\"statusTicket\",error:touched.statusTicket&&Boolean(errors.statusTicket),disabled:!campaignEditable||values.openTicket==='disabled'},/*#__PURE__*/React.createElement(MenuItem,{value:\"closed\"},i18n.t(\"campaigns.dialog.form.closedTicketStatus\")),/*#__PURE__*/React.createElement(MenuItem,{value:\"pending\"},i18n.t(\"campaigns.dialog.form.pendingTicketStatus\")),/*#__PURE__*/React.createElement(MenuItem,{value:\"open\"},i18n.t(\"campaigns.dialog.form.openTicketStatus\"))))),/*#__PURE__*/React.createElement(Grid,{xs:12,item:true},/*#__PURE__*/React.createElement(Tabs,{value:messageTab,indicatorColor:\"primary\",textColor:\"primary\",onChange:(e,v)=>setMessageTab(v),variant:\"fullWidth\",centered:true,style:{background:\"#f2f2f2\",border:\"1px solid #e6e6e6\",borderRadius:2}},/*#__PURE__*/React.createElement(Tab,{label:\"Msg. 1\",index:0}),/*#__PURE__*/React.createElement(Tab,{label:\"Msg. 2\",index:1}),/*#__PURE__*/React.createElement(Tab,{label:\"Msg. 3\",index:2}),/*#__PURE__*/React.createElement(Tab,{label:\"Msg. 4\",index:3}),/*#__PURE__*/React.createElement(Tab,{label:\"Msg. 5\",index:4})),/*#__PURE__*/React.createElement(Box,{style:{paddingTop:20,border:\"none\"}},messageTab===0&&/*#__PURE__*/React.createElement(React.Fragment,null,values.confirmation?/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:12,md:8,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message1\"))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderConfirmationMessageField(\"confirmationMessage1\")))):/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message1\"))),messageTab===1&&/*#__PURE__*/React.createElement(React.Fragment,null,values.confirmation?/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:12,md:8,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message2\"))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderConfirmationMessageField(\"confirmationMessage2\")))):/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message2\"))),messageTab===2&&/*#__PURE__*/React.createElement(React.Fragment,null,values.confirmation?/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:12,md:8,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message3\"))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderConfirmationMessageField(\"confirmationMessage3\")))):/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message3\"))),messageTab===3&&/*#__PURE__*/React.createElement(React.Fragment,null,values.confirmation?/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:12,md:8,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message4\"))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderConfirmationMessageField(\"confirmationMessage4\")))):/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message4\"))),messageTab===4&&/*#__PURE__*/React.createElement(React.Fragment,null,values.confirmation?/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:12,md:8,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message5\"))),/*#__PURE__*/React.createElement(Grid,{xs:12,md:4,item:true},/*#__PURE__*/React.createElement(React.Fragment,null,renderConfirmationMessageField(\"confirmationMessage5\")))):/*#__PURE__*/React.createElement(React.Fragment,null,renderMessageField(\"message5\"))))),(campaign.mediaPath||attachment)&&/*#__PURE__*/React.createElement(Grid,{xs:12,item:true},/*#__PURE__*/React.createElement(Button,{startIcon:/*#__PURE__*/React.createElement(AttachFileIcon,null)},attachment!=null?attachment.name:campaign.mediaName),campaignEditable&&/*#__PURE__*/React.createElement(IconButton,{onClick:()=>setConfirmationOpen(true),color:\"primary\"},/*#__PURE__*/React.createElement(DeleteOutlineIcon,{color:\"secondary\"}))))),/*#__PURE__*/React.createElement(DialogActions,null,campaign.status===\"CANCELADA\"&&/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:()=>restartCampaign(),variant:\"outlined\"},i18n.t(\"campaigns.dialog.buttons.restart\")),campaign.status===\"EM_ANDAMENTO\"&&/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:()=>cancelCampaign(),variant:\"outlined\"},i18n.t(\"campaigns.dialog.buttons.cancel\")),!attachment&&!campaign.mediaPath&&campaignEditable&&/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:()=>attachmentFile.current.click(),disabled:isSubmitting,variant:\"outlined\"},i18n.t(\"campaigns.dialog.buttons.attach\")),/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"primary\",disabled:isSubmitting,variant:\"outlined\"},i18n.t(\"campaigns.dialog.buttons.close\")),(campaignEditable||campaign.status===\"CANCELADA\")&&/*#__PURE__*/React.createElement(Button,{type:\"submit\",color:\"primary\",disabled:isSubmitting,variant:\"contained\",className:classes.btnWrapper},campaignId?\"\".concat(i18n.t(\"campaigns.dialog.buttons.edit\")):\"\".concat(i18n.t(\"campaigns.dialog.buttons.add\")),isSubmitting&&/*#__PURE__*/React.createElement(CircularProgress,{size:24,className:classes.buttonProgress}))));})));};export default CampaignModal;","map":null,"metadata":{},"sourceType":"module"}