{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import{makeStyles,Paper,Typography,Modal,IconButton}from\"@material-ui/core\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import Title from\"../../components/Title\";import{i18n}from\"../../translate/i18n\";import useHelps from\"../../hooks/useHelps\";const useStyles=makeStyles(theme=>({mainPaperContainer:{overflowY:'auto',maxHeight:'calc(100vh - 200px)'},mainPaper:{width:'100%',display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(320px, 1fr))',gap:theme.spacing(3),padding:theme.spacing(2),marginBottom:theme.spacing(3)},helpPaper:{position:'relative',width:'100%',minHeight:'340px',padding:theme.spacing(2),boxShadow:theme.shadows[3],borderRadius:theme.spacing(1),cursor:'pointer',display:'flex',flexDirection:'column',justifyContent:'space-between',maxWidth:'340px'},paperHover:{transition:'transform 0.3s, box-shadow 0.3s','&:hover':{transform:'scale(1.03)',boxShadow:\"0 0 8px\",color:theme.palette.primary.main}},videoThumbnail:{width:'100%',height:'calc(100% - 56px)',objectFit:'cover',borderRadius:\"\".concat(theme.spacing(1),\"px \").concat(theme.spacing(1),\"px 0 0\")},videoTitle:{marginTop:theme.spacing(1),flex:1},videoDescription:{maxHeight:'100px',overflow:'hidden'},videoModal:{display:'flex',alignItems:'center',justifyContent:'center'},videoModalContent:{outline:'none',width:'90%',maxWidth:1024,aspectRatio:'16/9',position:'relative',backgroundColor:'white',borderRadius:theme.spacing(1),overflow:'hidden'}}));const Helps=()=>{const classes=useStyles();const[records,setRecords]=useState([]);const{list}=useHelps();const[selectedVideo,setSelectedVideo]=useState(null);useEffect(()=>{async function fetchData(){const helps=await list();setRecords(helps);}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const openVideoModal=video=>{setSelectedVideo(video);};const closeVideoModal=()=>{setSelectedVideo(null);};const handleModalClose=useCallback(event=>{if(event.key===\"Escape\"){closeVideoModal();}},[]);useEffect(()=>{document.addEventListener(\"keydown\",handleModalClose);return()=>{document.removeEventListener(\"keydown\",handleModalClose);};},[handleModalClose]);const renderVideoModal=()=>{return/*#__PURE__*/React.createElement(Modal,{open:Boolean(selectedVideo),onClose:closeVideoModal,className:classes.videoModal},/*#__PURE__*/React.createElement(\"div\",{className:classes.videoModalContent},selectedVideo&&/*#__PURE__*/React.createElement(\"iframe\",{style:{width:\"100%\",height:\"100%\",position:\"absolute\",top:0,left:0},src:\"https://www.youtube.com/embed/\".concat(selectedVideo),title:\"YouTube video player\",frameBorder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:true})));};const renderHelps=()=>{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(classes.mainPaper,\" \").concat(classes.mainPaperContainer)},records.length?records.map((record,key)=>/*#__PURE__*/React.createElement(Paper,{key:key,className:\"\".concat(classes.helpPaper,\" \").concat(classes.paperHover),onClick:()=>openVideoModal(record.video)},/*#__PURE__*/React.createElement(\"img\",{src:\"https://img.youtube.com/vi/\".concat(record.video,\"/mqdefault.jpg\"),alt:\"Thumbnail\",className:classes.videoThumbnail}),/*#__PURE__*/React.createElement(Typography,{variant:\"button\",className:classes.videoTitle},record.title),/*#__PURE__*/React.createElement(Typography,{variant:\"caption\",className:classes.videoDescription},record.description))):null));};return/*#__PURE__*/React.createElement(MainContainer,null,/*#__PURE__*/React.createElement(MainHeader,null,/*#__PURE__*/React.createElement(Title,null,i18n.t(\"helps.title\"),\" (\",records.length,\")\"),/*#__PURE__*/React.createElement(MainHeaderButtonsWrapper,null)),/*#__PURE__*/React.createElement(\"div\",{className:classes.mainPaper},renderHelps()),renderVideoModal());};export default Helps;","map":null,"metadata":{},"sourceType":"module"}