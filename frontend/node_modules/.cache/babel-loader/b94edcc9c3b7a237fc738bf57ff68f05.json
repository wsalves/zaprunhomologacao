{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import Button from\"@material-ui/core/Button\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Typography from\"@material-ui/core/Typography\";import api from\"../../services/api\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Grid,Select,MenuItem,ListItemText}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/styles\";import{Face,Facebook,WhatsApp}from\"@material-ui/icons\";import{Instagram}from\"@mui/icons-material\";import{i18n}from\"../../translate/i18n\";import ButtonWithSpinner from\"../ButtonWithSpinner\";const useStyles=makeStyles(theme=>({online:{fontSize:11,color:\"#25d366\"},offline:{fontSize:11,color:\"#e1306c\"}}));const ConfirmationModal=_ref=>{let{title,children,open,onClose,onConfirm,isCellPhone,onSave}=_ref;const classes=useStyles();const[selectedWhatsapp,setSelectedWhatsapp]=useState(\"\");const[whatsapps,setWhatsapps]=useState([]);const{user}=useContext(AuthContext);const{companyId}=user;useEffect(()=>{const delayDebounceFn=setTimeout(()=>{const fetchContacts=async()=>{api// .get(`/whatsapp/filter`, { params: { companyId, session: 0, channel: channelFilter } })\n.get(\"/whatsapp\",{params:{companyId,session:0}}).then(_ref2=>{let{data}=_ref2;return setWhatsapps(data);});};fetchContacts();},500);return()=>clearTimeout(delayDebounceFn);},[open]);const IconChannel=channel=>{switch(channel){case\"facebook\":return/*#__PURE__*/React.createElement(Facebook,{style:{color:\"#3b5998\",verticalAlign:\"middle\"}});case\"instagram\":return/*#__PURE__*/React.createElement(Instagram,{style:{color:\"#e1306c\",verticalAlign:\"middle\"}});case\"whatsapp\":return/*#__PURE__*/React.createElement(WhatsApp,{style:{color:\"#25d366\",verticalAlign:\"middle\"}});default:return\"error\";}};const handleClose=()=>{onClose();};return/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:()=>onClose(false),\"aria-labelledby\":\"confirm-dialog\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"confirm-dialog\"},title),/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(Typography,null,children),isCellPhone&&/*#__PURE__*/React.createElement(Grid,{style:{width:300,marginTop:10},container:true},/*#__PURE__*/React.createElement(Grid,{xs:12,item:true},/*#__PURE__*/React.createElement(Select,{required:true,fullWidth:true,displayEmpty:true,variant:\"outlined\",value:selectedWhatsapp,onChange:e=>{setSelectedWhatsapp(e.target.value);},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:()=>{if(selectedWhatsapp===\"\"){return\"Selecione uma ConexÃ£o\";}const whatsapp=whatsapps.find(w=>w.id===selectedWhatsapp);return whatsapp===null||whatsapp===void 0?void 0:whatsapp.name;}},(whatsapps===null||whatsapps===void 0?void 0:whatsapps.length)>0&&whatsapps.map((whatsapp,key)=>/*#__PURE__*/React.createElement(MenuItem,{dense:true,key:key,value:whatsapp.id},/*#__PURE__*/React.createElement(ListItemText,{primary:/*#__PURE__*/React.createElement(React.Fragment,null,IconChannel(whatsapp.channel),/*#__PURE__*/React.createElement(Typography,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"}},whatsapp.name,\" \\xA0\",\" \",/*#__PURE__*/React.createElement(\"p\",{className:whatsapp.status===\"CONNECTED\"?classes.online:classes.offline},\"(\",whatsapp.status,\")\")))}))))))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",onClick:()=>onClose(false),color:\"default\"},i18n.t(\"confirmationModal.buttons.cancel\")),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",onClick:()=>{if(isCellPhone){onSave(selectedWhatsapp);}onClose(false);onConfirm();},color:\"secondary\"},i18n.t(\"confirmationModal.buttons.confirm\"))));};export default ConfirmationModal;","map":null,"metadata":{},"sourceType":"module"}